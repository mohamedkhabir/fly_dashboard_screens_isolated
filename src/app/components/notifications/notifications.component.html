<div class="notifications-page">

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <div class="page-header-left">
          <h1>Notifications & Alerts</h1>
          <p class="subtitle">Operational updates, financial alerts, and booking status for your agency.</p>
        </div>
        <button class="btn btn-primary" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
          Mark all as read
        </button>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab-btn"
          [class.active]="activeTab === 'all'"
          (click)="setTab('all')">
          All Notifications
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'schedule'"
          (click)="setTab('schedule')">
          Schedule Changes
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'wallet'"
          (click)="setTab('wallet')">
          Wallet Alerts
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'booking'"
          (click)="setTab('booking')">
          Booking Updates
        </button>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list">
        <div
          class="notification-card"
          *ngFor="let notification of filteredNotifications"
          [class.unread]="!notification.isRead"
          [attr.data-type]="notification.type"
          (click)="markAsRead(notification.id)">

          <!-- Left Border Indicator -->
          <div class="notification-border" [ngClass]="notification.type"></div>

          <!-- Icon -->
          <div class="notification-icon" [ngClass]="notification.type">
            <!-- Schedule/Plane Icon -->
            <svg *ngIf="notification.type === 'schedule'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M17.5 13.333V11.667L10.833 7.5V2.917C10.833 2.227 10.273 1.667 9.583 1.667C8.893 1.667 8.333 2.227 8.333 2.917V7.5L1.667 11.667V13.333L8.333 11.25V15.833L6.667 17.083V18.333L9.583 17.5L12.5 18.333V17.083L10.833 15.833V11.25L17.5 13.333Z" fill="currentColor"/>
            </svg>
            <!-- Wallet Icon -->
            <svg *ngIf="notification.type === 'wallet'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="2" y="5" width="16" height="11" rx="1.5" stroke="currentColor" stroke-width="1.5"/>
              <path d="M2 8H18" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="14.5" cy="11.5" r="1.5" fill="currentColor"/>
            </svg>
            <!-- Booking/Check Icon -->
            <svg *ngIf="notification.type === 'booking' && notification.icon === 'check'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="8" fill="currentColor"/>
              <path d="M6.5 10L9 12.5L13.5 7.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <!-- Info/Ticket Icon -->
            <svg *ngIf="notification.type === 'booking' && notification.icon === 'ticket'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="3" y="5" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="7" cy="10" r="1" fill="currentColor"/>
              <circle cx="10" cy="10" r="1" fill="currentColor"/>
            </svg>
          </div>

          <!-- Content -->
          <div class="notification-content">
            <div class="notification-header">
              <div class="notification-title-row">
                <h3>{{ notification.title }}</h3>
                <span class="unread-dot" *ngIf="!notification.isRead"></span>
              </div>
              <span class="notification-time">{{ notification.time }}</span>
            </div>
            <p class="notification-message">{{ notification.message }}</p>
          </div>

          <!-- Action Button -->
          <button
            class="notification-action"
            [class.primary]="notification.type === 'schedule'"
            *ngIf="notification.actionLabel"
            (click)="handleAction(notification); $event.stopPropagation()">
            {{ notification.actionLabel }}
          </button>
        </div>

        <!-- Load More -->
        <div class="load-more" *ngIf="filteredNotifications.length > 0">
          <button class="btn-load-more" (click)="loadOlderNotifications()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Load older notifications
          </button>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="filteredNotifications.length === 0">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <circle cx="32" cy="32" r="28" fill="#F3F4F6"/>
            <path d="M32 20V32L40 36" stroke="#9CA3AF" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <h3>No notifications</h3>
          <p>You're all caught up! No notifications in this category.</p>
        </div>
      </div>
    </div>
  </main>


</div>
