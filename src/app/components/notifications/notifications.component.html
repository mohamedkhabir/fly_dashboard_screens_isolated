<div class="notifications-page">
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L4 6V12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12V6L12 2Z" fill="#0D6EFD"/>
          <path d="M12 6L16 8V12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12V8L12 6Z" fill="white"/>
        </svg>
        <span>Amadeus Portal</span>
      </div>
      <div class="search-box">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <circle cx="7" cy="7" r="5" stroke="#9CA3AF" stroke-width="1.5"/>
          <path d="M11 11L14 14" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input type="text" placeholder="Search flights, PNR...">
      </div>
    </div>
    <div class="header-right">
      <nav class="nav-links">
        <a routerLink="/flight-search" routerLinkActive="active">Dashboard</a>
        <a routerLink="/booking-confirmation" routerLinkActive="active">Bookings</a>
        <a routerLink="/wallet" routerLinkActive="active">Wallet</a>
        <a routerLink="/sales-reporting" routerLinkActive="active">Reports</a>
      </nav>
      <div class="header-icons">
        <button class="icon-btn active">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path d="M13.5 6.375C13.5 5.18153 13.0259 4.03693 12.182 3.18198C11.3381 2.32704 10.2065 1.84375 9.025 1.84375C7.84346 1.84375 6.71186 2.32704 5.86796 3.18198C5.02406 4.03693 4.55 5.18153 4.55 6.375C4.55 10.5 2.8 11.625 2.8 11.625H15.25C15.25 11.625 13.5 10.5 13.5 6.375Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M10.0538 14.4375C9.91SEG1 14.7037 9.70584 14.9284 9.44965 15.0899C9.19347 15.2514 8.90004 15.3438 8.6 15.3438C8.29996 15.3438 8.00653 15.2514 7.75035 15.0899C7.49416 14.9284 7.28399 14.7037 7.14625 14.4375" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="icon-btn">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
            <circle cx="9" cy="9" r="1.5" fill="currentColor"/>
            <circle cx="9" cy="4" r="1.5" fill="currentColor"/>
            <circle cx="9" cy="14" r="1.5" fill="currentColor"/>
          </svg>
        </button>
        <div class="avatar">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="User">
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Page Header -->
      <div class="page-header">
        <div class="page-header-left">
          <h1>Notifications & Alerts</h1>
          <p class="subtitle">Operational updates, financial alerts, and booking status for your agency.</p>
        </div>
        <button class="btn btn-primary" (click)="markAllAsRead()" [disabled]="unreadCount === 0">
          Mark all as read
        </button>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab-btn"
          [class.active]="activeTab === 'all'"
          (click)="setTab('all')">
          All Notifications
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'schedule'"
          (click)="setTab('schedule')">
          Schedule Changes
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'wallet'"
          (click)="setTab('wallet')">
          Wallet Alerts
        </button>
        <button
          class="tab-btn"
          [class.active]="activeTab === 'booking'"
          (click)="setTab('booking')">
          Booking Updates
        </button>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list">
        <div
          class="notification-card"
          *ngFor="let notification of filteredNotifications"
          [class.unread]="!notification.isRead"
          [attr.data-type]="notification.type"
          (click)="markAsRead(notification.id)">

          <!-- Left Border Indicator -->
          <div class="notification-border" [ngClass]="notification.type"></div>

          <!-- Icon -->
          <div class="notification-icon" [ngClass]="notification.type">
            <!-- Schedule/Plane Icon -->
            <svg *ngIf="notification.type === 'schedule'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M17.5 13.333V11.667L10.833 7.5V2.917C10.833 2.227 10.273 1.667 9.583 1.667C8.893 1.667 8.333 2.227 8.333 2.917V7.5L1.667 11.667V13.333L8.333 11.25V15.833L6.667 17.083V18.333L9.583 17.5L12.5 18.333V17.083L10.833 15.833V11.25L17.5 13.333Z" fill="currentColor"/>
            </svg>
            <!-- Wallet Icon -->
            <svg *ngIf="notification.type === 'wallet'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="2" y="5" width="16" height="11" rx="1.5" stroke="currentColor" stroke-width="1.5"/>
              <path d="M2 8H18" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="14.5" cy="11.5" r="1.5" fill="currentColor"/>
            </svg>
            <!-- Booking/Check Icon -->
            <svg *ngIf="notification.type === 'booking' && notification.icon === 'check'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="8" fill="currentColor"/>
              <path d="M6.5 10L9 12.5L13.5 7.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <!-- Info/Ticket Icon -->
            <svg *ngIf="notification.type === 'booking' && notification.icon === 'ticket'" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <rect x="3" y="5" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="7" cy="10" r="1" fill="currentColor"/>
              <circle cx="10" cy="10" r="1" fill="currentColor"/>
            </svg>
          </div>

          <!-- Content -->
          <div class="notification-content">
            <div class="notification-header">
              <div class="notification-title-row">
                <h3>{{ notification.title }}</h3>
                <span class="unread-dot" *ngIf="!notification.isRead"></span>
              </div>
              <span class="notification-time">{{ notification.time }}</span>
            </div>
            <p class="notification-message">{{ notification.message }}</p>
          </div>

          <!-- Action Button -->
          <button
            class="notification-action"
            [class.primary]="notification.type === 'schedule'"
            *ngIf="notification.actionLabel"
            (click)="handleAction(notification); $event.stopPropagation()">
            {{ notification.actionLabel }}
          </button>
        </div>

        <!-- Load More -->
        <div class="load-more" *ngIf="filteredNotifications.length > 0">
          <button class="btn-load-more" (click)="loadOlderNotifications()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Load older notifications
          </button>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="filteredNotifications.length === 0">
          <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
            <circle cx="32" cy="32" r="28" fill="#F3F4F6"/>
            <path d="M32 20V32L40 36" stroke="#9CA3AF" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <h3>No notifications</h3>
          <p>You're all caught up! No notifications in this category.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <span class="copyright">Â© 2024 AMADEUS PORTAL FOR NON-IATA AGENCIES</span>
    <div class="footer-links">
      <a href="#">SUPPORT</a>
      <a href="#">TERMS</a>
      <a href="#">PRIVACY</a>
    </div>
  </footer>
</div>
