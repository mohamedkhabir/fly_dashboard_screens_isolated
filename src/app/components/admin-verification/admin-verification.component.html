<div class="admin-verification-container">
  <header class="admin-header">
    <div class="header-content">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect width="32" height="32" rx="6" fill="#0D6EFD"/>
          <path d="M16 8L12 12H14V20H18V12H20L16 8Z" fill="white"/>
          <rect x="10" y="22" width="12" height="2" fill="white"/>
        </svg>
        <span class="logo-text">Admin Portal</span>
      </div>
      <div class="header-search">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="8" cy="8" r="6" stroke="#9CA3AF" stroke-width="1.5"/>
          <path d="M12 12L16 16" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input type="text" placeholder="Search agencies...">
      </div>
      <nav class="header-nav">
        <a routerLink="/admin-verification" class="nav-link" routerLinkActive="active">Agencies</a>
        <a routerLink="/booking-confirmation" class="nav-link" routerLinkActive="active">Bookings</a>
        <a routerLink="/wallet" class="nav-link" routerLinkActive="active">Payments</a>
        <a routerLink="/admin-settings" class="nav-link" routerLinkActive="active">Settings</a>
      </nav>
      <div class="user-section">
        <button class="icon-button">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M15 7C15 5.93913 14.5786 4.92172 13.8284 4.17157C13.0783 3.42143 12.0609 3 11 3C9.93913 3 8.92172 3.42143 8.17157 4.17157C7.42143 4.92172 7 5.93913 7 7C7 11 5 12 5 12H17C17 12 15 11 15 7Z" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </button>
        <button class="icon-button">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 2C14.4183 2 18 5.58172 18 10C18 14.4183 14.4183 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2Z" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </button>
        <div class="user-avatar">
          <img src="data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23F59E0B'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16' font-weight='600'%3EA%3C/text%3E%3C/svg%3E" alt="Admin">
        </div>
      </div>
    </div>
  </header>

  <div class="breadcrumb">
    <div class="breadcrumb-content">
      <a routerLink="/admin-settings">Admin</a>
      <span class="separator">/</span>
      <a routerLink="/admin-verification">Agencies</a>
      <span class="separator">/</span>
      <span class="current">KYC Verification</span>
    </div>
  </div>

  <main class="main-content">
    <div class="container">
      <div class="agency-header-section">
        <div class="agency-title">
          <h1>{{ agencyName }}</h1>
          <span class="status-badge pending">PENDING REVIEW</span>
        </div>
        <div class="agency-meta">
          <span>Agency ID: <strong>{{ agencyId }}</strong></span>
          <span class="separator">•</span>
          <span>Submitted on {{ submittedDate }}</span>
        </div>
        <div class="header-actions">
          <button class="btn btn-secondary" (click)="downloadDossier()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M9 2V10M9 10L12 7M9 10L6 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M3 12V14C3 14.5304 3.21071 15.0391 3.58579 15.4142C3.96086 15.7893 4.46957 16 5 16H13C13.5304 16 14.0391 15.7893 14.4142 15.4142C14.7893 15.0391 15 14.5304 15 14V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Download Dossier
          </button>
          <button class="btn btn-secondary" (click)="viewAuditLog()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M9 5V9L12 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Audit Log
          </button>
        </div>
      </div>

      <div class="status-cards">
        <div class="status-card">
          <div class="status-icon blue">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M12 2L4 5V11C4 16.55 7.84 21.74 12 23C16.16 21.74 20 16.55 20 11V5L12 2Z" stroke="currentColor" stroke-width="2"/>
              <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="status-content">
            <div class="status-label">Verification Status</div>
            <div class="status-value">{{ verificationStatus }}</div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 66%"></div>
            </div>
          </div>
        </div>

        <div class="status-card">
          <div class="status-icon green">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <rect x="3" y="6" width="18" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
              <circle cx="15" cy="12" r="2" fill="currentColor"/>
            </svg>
          </div>
          <div class="status-content">
            <div class="status-label">Subscription</div>
            <div class="status-value">{{ subscriptionPlan }}</div>
            <div class="status-meta">Active until Dec 2024</div>
          </div>
        </div>

        <div class="status-card">
          <div class="status-icon purple">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              <path d="M12 2V5M12 19V22M5 12H2M22 12H19M6.34 6.34L4.22 4.22M19.78 19.78L17.66 17.66M17.66 6.34L19.78 4.22M4.22 19.78L6.34 17.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="status-content">
            <div class="status-label">Amadeus API</div>
            <div class="status-value">{{ apiStatus }}</div>
            <div class="status-meta">Production Environment</div>
          </div>
        </div>
      </div>

      <div class="content-grid">
        <div class="documents-section">
          <div class="section-card">
            <div class="section-header">
              <h2>Legal Documents</h2>
            </div>

            <div class="documents-list">
              <div
                class="document-item"
                *ngFor="let doc of documents"
                [class.active]="selectedDocument?.id === doc.id"
                (click)="viewDocument(doc)"
              >
                <div class="doc-icon">
                  <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <rect width="40" height="40" rx="8" fill="#F3F4F6"/>
                    <path d="M15 12C14.4477 12 14 12.4477 14 13V27C14 27.5523 14.4477 28 15 28H25C25.5523 28 26 27.5523 26 27V16L22 12H15Z" stroke="#6B7280" stroke-width="1.5"/>
                    <path d="M22 12V16H26" stroke="#6B7280" stroke-width="1.5"/>
                  </svg>
                </div>
                <div class="doc-info">
                  <div class="doc-name">{{ doc.name }}</div>
                  <div class="doc-meta">
                    Uploaded {{ doc.uploadDate }} • {{ doc.fileType }} ({{ doc.fileSize }})
                  </div>
                </div>
                <div class="doc-status">
                  <span class="status-badge-small" [class.verified]="doc.status === 'verified'" [class.pending]="doc.status === 'pending'">
                    <svg *ngIf="doc.status === 'verified'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                      <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                      <path d="M4 7L6 9L10 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    <svg *ngIf="doc.status === 'pending'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                      <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                      <path d="M7 3V7L10 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    {{ doc.status === 'verified' ? 'Verified' : 'Pending Review' }}
                  </span>
                  <button class="view-button">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M9 3C4 3 1.5 9 1.5 9S4 15 9 15S16.5 9 16.5 9S14 3 9 3Z" stroke="currentColor" stroke-width="1.5"/>
                      <circle cx="9" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <div class="document-preview" *ngIf="showDocumentPreview && selectedDocument">
              <div class="preview-header">
                <h3>Document Preview</h3>
                <div class="preview-actions">
                  <button class="icon-btn" (click)="fullScreenPreview()" title="Full Screen">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M2 7V3H6M16 7V3H12M16 11V15H12M2 11V15H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    Full Screen
                  </button>
                  <button class="icon-btn" (click)="printDocument()" title="Print">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <rect x="4" y="2" width="10" height="5" stroke="currentColor" stroke-width="1.5"/>
                      <rect x="2" y="7" width="14" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
                      <rect x="4" y="11" width="10" height="5" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Print Document
                  </button>
                </div>
              </div>
              <div class="preview-content">
                <div class="sensitive-document">
                  <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="32" cy="32" r="28" fill="#E7F1FF"/>
                    <path d="M32 18C25.37 18 20 23.37 20 30V32H18V44H46V32H44V30C44 23.37 38.63 18 32 18ZM32 22C36.42 22 40 25.58 40 30V32H24V30C24 25.58 27.58 22 32 22Z" fill="#0D6EFD"/>
                  </svg>
                  <h3>SENSITIVE DOCUMENT PREVIEW</h3>
                  <p>ID Document for Jean-Luc Picard</p>
                  <div class="document-placeholder">
                    <div class="placeholder-line"></div>
                    <div class="placeholder-line short"></div>
                    <div class="placeholder-line"></div>
                    <div class="placeholder-line medium"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="details-section">
          <div class="section-card">
            <div class="section-header">
              <h2>Agency Details</h2>
            </div>
            <div class="details-content">
              <div class="detail-row">
                <div class="detail-label">COMPANY NAME</div>
                <div class="detail-value">{{ agencyDetails.companyName }}</div>
              </div>
              <div class="detail-row">
                <div class="detail-label">TAX ID / VAT</div>
                <div class="detail-value">{{ agencyDetails.taxId }}</div>
              </div>
              <div class="detail-row">
                <div class="detail-label">ADDRESS</div>
                <div class="detail-value">{{ agencyDetails.address }}</div>
              </div>
              <div class="detail-row">
                <div class="detail-label">LEGAL REPRESENTATIVE</div>
                <div class="detail-value">
                  {{ agencyDetails.legalRep }}<br>
                  <span class="detail-meta">{{ agencyDetails.position }}</span>
                </div>
              </div>
              <div class="detail-row">
                <div class="detail-label">CONTACT EMAIL</div>
                <div class="detail-value">
                  <a href="mailto:{{ agencyDetails.email }}">{{ agencyDetails.email }}</a>
                </div>
              </div>
            </div>
          </div>

          <div class="section-card decision-card">
            <div class="section-header">
              <h2>Decision</h2>
            </div>
            <div class="decision-content">
              <button class="btn btn-success btn-lg btn-block" (click)="approveAgency()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6 10L9 13L14 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Approve Agency
              </button>
              <button class="btn btn-danger btn-lg btn-block" (click)="rejectAgency()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M7 7L13 13M13 7L7 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Reject with Reason
              </button>

              <div class="admin-notes">
                <label class="notes-label">ADMIN NOTES (INTERNAL)</label>
                <textarea
                  class="notes-textarea"
                  [(ngModel)]="adminNotes"
                  placeholder="Add a note for other admins..."
                  rows="4"
                ></textarea>
              </div>

              <div class="approval-note">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <circle cx="8" cy="8" r="7" stroke="#6B7280" stroke-width="1.5"/>
                  <path d="M8 4V8M8 11H8.01" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <p>Approved agencies gain immediate access to Amadeus inventory.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
