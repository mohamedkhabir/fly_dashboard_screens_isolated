<div class="admin-verification-page">


  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Agency Header -->
      <div class="agency-header">
        <div class="agency-header-left">
          <div class="agency-title">
            <h1>{{ agencyName }}</h1>
            <span class="status-badge pending">PENDING REVIEW</span>
          </div>
          <p class="agency-meta">
            Agency ID: <strong>{{ agencyId }}</strong> • Submitted on {{ submittedDate }}
          </p>
        </div>
        <div class="agency-header-right">
          <button class="btn btn-outline" (click)="downloadDossier()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M3 12V14C3 14.5304 3.21071 15.0391 3.58579 15.4142C3.96086 15.7893 4.46957 16 5 16H13C13.5304 16 14.0391 15.7893 14.4142 15.4142C14.7893 15.0391 15 14.5304 15 14V12M9 3V11M9 11L6 8M9 11L12 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Download Dossier
          </button>
          <button class="btn btn-outline" (click)="viewAuditLog()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M9 5V9L12 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            Audit Log
          </button>
        </div>
      </div>

      <!-- Status Cards -->
      <div class="status-cards">
        <div class="status-card">
          <div class="status-card-header">
            <span class="status-label">Verification Status</span>
            <div class="status-icon blue">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                <path d="M6.5 10L9 12.5L13.5 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          <div class="status-value">{{ verificationStatus }}</div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 66%"></div>
          </div>
        </div>

        <div class="status-card">
          <div class="status-card-header">
            <span class="status-label">Subscription</span>
            <div class="status-icon green">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <rect x="2" y="5" width="16" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                <circle cx="14" cy="10" r="2" fill="currentColor"/>
              </svg>
            </div>
          </div>
          <div class="status-value">{{ subscriptionPlan }}</div>
          <div class="status-meta green">Active until Dec 2024</div>
        </div>

        <div class="status-card">
          <div class="status-card-header">
            <span class="status-label">Amadeus API</span>
            <div class="status-icon purple">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle cx="10" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/>
                <path d="M10 2V5M10 15V18M2 10H5M15 10H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M4.93 4.93L7.05 7.05M12.95 12.95L15.07 15.07M15.07 4.93L12.95 7.05M7.05 12.95L4.93 15.07" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
          </div>
          <div class="status-value">{{ apiStatus }}</div>
          <div class="status-meta">Production Environment</div>
        </div>
      </div>

      <!-- Main Grid -->
      <div class="content-grid">
        <!-- Left Column - Documents -->
        <div class="documents-column">
          <!-- Legal Documents Section -->
          <div class="section-card">
            <div class="section-header">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M6 2H12L16 6V16C16 17.1046 15.1046 18 14 18H6C4.89543 18 4 17.1046 4 16V4C4 2.89543 4.89543 2 6 2Z" stroke="#6B7280" stroke-width="1.5"/>
                <path d="M12 2V6H16" stroke="#6B7280" stroke-width="1.5"/>
              </svg>
              <h2>Legal Documents</h2>
            </div>

            <div class="documents-list">
              <div
                class="document-item"
                *ngFor="let doc of documents"
                [class.active]="selectedDocument?.id === doc.id"
                (click)="viewDocument(doc)">

                <div class="doc-icon" [ngClass]="{
                  'icon-blue': doc.status === 'verified',
                  'icon-yellow': doc.status === 'pending'
                }">
                  <!-- Document icon -->
                  <svg *ngIf="doc.name === 'KBIS Registration'" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="4" y="3" width="12" height="14" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M7 7H13M7 10H13M7 13H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                  <!-- Image icon for RIB -->
                  <svg *ngIf="doc.name === 'RIB (Bank Details)'" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="3" y="5" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="7" cy="9" r="1.5" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M3 13L7 10L10 12L14 9L17 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <!-- ID Card icon -->
                  <svg *ngIf="doc.name === 'Legal Rep ID'" width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="2" y="4" width="16" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M2 8H18" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="7" cy="12" r="2" stroke="currentColor" stroke-width="1"/>
                  </svg>
                </div>

                <div class="doc-info">
                  <span class="doc-name">{{ doc.name }}</span>
                  <span class="doc-meta">Uploaded {{ doc.uploadDate }} • {{ doc.fileType }} ({{ doc.fileSize }})</span>
                </div>

                <div class="doc-actions">
                  <span class="status-tag" [ngClass]="{
                    'verified': doc.status === 'verified',
                    'pending': doc.status === 'pending'
                  }">
                    <svg *ngIf="doc.status === 'verified'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                      <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                      <path d="M4.5 7L6.5 9L9.5 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <svg *ngIf="doc.status === 'pending'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                      <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                      <path d="M7 4V7L9 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    {{ doc.status === 'verified' ? 'Verified' : 'Pending Review' }}
                  </span>
                  <button class="btn-view" *ngIf="doc.status === 'verified'">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path d="M9 4C5 4 2 9 2 9S5 14 9 14S16 9 16 9S13 4 9 4Z" stroke="currentColor" stroke-width="1.5"/>
                      <circle cx="9" cy="9" r="2" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                  </button>
                  <button class="btn-review" *ngIf="doc.status === 'pending'" (click)="viewDocument(doc); $event.stopPropagation()">
                    Review Now
                  </button>
                </div>
              </div>
            </div>

            <!-- Document Preview -->
            <div class="document-preview" *ngIf="showDocumentPreview && selectedDocument">
              <div class="preview-content">
                <div class="preview-placeholder">
                  <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                    <circle cx="24" cy="24" r="20" fill="#F3F4F6"/>
                    <path d="M24 15C19 15 15 24 15 24C15 24 19 33 24 33C29 33 33 24 33 24C33 24 29 15 24 15Z" stroke="#9CA3AF" stroke-width="2"/>
                    <circle cx="24" cy="24" r="4" stroke="#9CA3AF" stroke-width="2"/>
                  </svg>
                  <h4>SENSITIVE DOCUMENT PREVIEW</h4>
                  <p>ID Document for Jean-Luc Picard</p>
                </div>
              </div>
              <div class="preview-actions">
                <button class="btn-action" (click)="fullScreenPreview()">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M2 5V3C2 2.44772 2.44772 2 3 2H5M11 2H13C13.5523 2 14 2.44772 14 3V5M14 11V13C14 13.5523 13.5523 14 13 14H11M5 14H3C2.44772 14 2 13.5523 2 13V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                  Full Screen
                </button>
                <button class="btn-action" (click)="printDocument()">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <rect x="4" y="2" width="8" height="4" stroke="currentColor" stroke-width="1.5"/>
                    <rect x="2" y="6" width="12" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                    <rect x="4" y="9" width="8" height="5" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                  Print Document
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Details & Decision -->
        <div class="details-column">
          <!-- Agency Details Card -->
          <div class="section-card details-card">
            <div class="section-header">
              <h2>Agency Details</h2>
            </div>
            <div class="details-content">
              <div class="detail-row">
                <span class="detail-label">COMPANY NAME</span>
                <span class="detail-value">{{ agencyDetails.companyName }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">TAX ID / VAT</span>
                <span class="detail-value">{{ agencyDetails.taxId }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">ADDRESS</span>
                <span class="detail-value">{{ agencyDetails.address }}</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">LEGAL REPRESENTATIVE</span>
                <span class="detail-value">
                  {{ agencyDetails.legalRep }}<br>
                  <span class="detail-meta">{{ agencyDetails.position }}</span>
                </span>
              </div>
              <div class="detail-row">
                <span class="detail-label">CONTACT EMAIL</span>
                <span class="detail-value">
                  <a href="mailto:{{ agencyDetails.email }}">{{ agencyDetails.email }}</a>
                </span>
              </div>
            </div>
          </div>

          <!-- Decision Card -->
          <div class="section-card decision-card">
            <div class="section-header">
              <h2>Decision</h2>
            </div>
            <div class="decision-content">
              <button class="btn btn-approve" (click)="approveAgency()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6.5 10L9 12.5L13.5 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Approve Agency
              </button>
              <button class="btn btn-reject" (click)="rejectAgency()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M7 7L13 13M13 7L7 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Reject with Reason
              </button>

              <div class="admin-notes">
                <label class="notes-label">ADMIN NOTES (INTERNAL)</label>
                <textarea
                  class="notes-textarea"
                  [(ngModel)]="adminNotes"
                  placeholder="Add a note for other admins..."
                  rows="3">
                </textarea>
              </div>

              <p class="approval-note">
                <em>Approved agencies gain immediate access to Amadeus inventory.</em>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
