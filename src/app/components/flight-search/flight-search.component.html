<div class="flight-search-container">
  <header class="page-header">
    <div class="header-content">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="12" stroke="#0D6EFD" stroke-width="2"/>
          <path d="M16 8V16L20 20" stroke="#0D6EFD" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="logo-text">AmadeusB2B</span>
      </div>
      <nav class="header-nav">
        <a routerLink="/flight-search" class="nav-link" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Dashboard</a>
        <a routerLink="/flight-search" class="nav-link" routerLinkActive="active">Search Flights</a>
        <a routerLink="/booking-confirmation" class="nav-link" routerLinkActive="active">My Bookings</a>
        <a routerLink="/wallet" class="nav-link" routerLinkActive="active">Wallet</a>
      </nav>
      <div class="header-actions">
        <div class="user-info">
          <span class="user-label">Corporate User</span>
          <span class="agency-id">Agency ID: 88239</span>
        </div>
        <div class="user-avatar">
          <img src="data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='18' cy='18' r='18' fill='%230D6EFD'/%3E%3Ctext x='18' y='23' text-anchor='middle' fill='white' font-size='14' font-weight='600'%3EU%3C/text%3E%3C/svg%3E" alt="User">
        </div>
      </div>
    </div>
  </header>

  <div class="search-summary-bar">
    <div class="summary-content">
      <div class="route-info">
        <div class="route-details">
          <span class="location">{{ searchSummary.from }} ({{ searchSummary.fromCode }})</span>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="location">{{ searchSummary.to }} ({{ searchSummary.toCode }})</span>
        </div>
        <div class="travel-details">
          <span>{{ searchSummary.date }}</span>
          <span class="separator">•</span>
          <span>{{ searchSummary.passengers }} Adult</span>
          <span class="separator">•</span>
          <span>{{ searchSummary.cabinClass }}</span>
        </div>
      </div>
      <button class="btn btn-outline" (click)="modifySearch()">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <path d="M13 2L16 5L6 15H3V12L13 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        Modify Search
      </button>
    </div>
  </div>

  <div class="main-layout">
    <aside class="filters-sidebar">
      <div class="filters-header">
        <h3>Filters</h3>
        <button class="clear-button" (click)="clearFilters()">Clear All</button>
      </div>

      <div class="filter-section">
        <h4 class="filter-title">STOPS</h4>
        <div class="filter-options">
          <label class="filter-option">
            <input
              type="radio"
              name="stops"
              value="direct"
              [checked]="selectedStops === 'direct'"
              (change)="setStopsFilter('direct')"
            >
            <span class="option-label">Direct</span>
            <span class="option-price">from $420</span>
          </label>
          <label class="filter-option">
            <input
              type="radio"
              name="stops"
              value="1-stop"
              [checked]="selectedStops === '1-stop'"
              (change)="setStopsFilter('1-stop')"
            >
            <span class="option-label">1 Stop</span>
            <span class="option-price">from $380</span>
          </label>
          <label class="filter-option">
            <input
              type="radio"
              name="stops"
              value="2-plus"
              [checked]="selectedStops === '2-plus'"
              (change)="setStopsFilter('2-plus')"
            >
            <span class="option-label">2+ Stops</span>
            <span class="option-price">from $350</span>
          </label>
        </div>
      </div>

      <div class="filter-section">
        <h4 class="filter-title">PRICE RANGE</h4>
        <div class="price-range-display">
          <span>${{ priceRange[0] }}</span>
          <span>${{ priceRange[1] }}+</span>
        </div>
        <div class="price-slider">
          <div class="slider-track"></div>
          <div class="slider-range" [style.left.%]="((priceRange[0] - 350) / (2400 - 350)) * 100" [style.width.%]="((priceRange[1] - priceRange[0]) / (2400 - 350)) * 100"></div>
        </div>
      </div>

      <div class="filter-section">
        <h4 class="filter-title">AIRLINES</h4>
        <div class="filter-options">
          <label class="filter-checkbox" *ngFor="let airline of airlines">
            <input
              type="checkbox"
              [checked]="selectedAirlines.includes(airline)"
              (change)="toggleAirline(airline)"
            >
            <span class="checkbox-label">{{ airline }}</span>
          </label>
        </div>
      </div>

      <div class="filter-section">
        <h4 class="filter-title">DEPARTURE TIME</h4>
        <div class="time-slots">
          <button
            class="time-slot"
            [class.active]="selectedDeparture === 'morning'"
            (click)="setDepartureTime('morning')"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M10 6V10L13 12" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            <span>Early Morning</span>
          </button>
          <button
            class="time-slot"
            [class.active]="selectedDeparture === 'afternoon'"
            (click)="setDepartureTime('afternoon')"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M10 6V10L13 12" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            <span>Afternoon</span>
          </button>
          <button
            class="time-slot"
            [class.active]="selectedDeparture === 'evening'"
            (click)="setDepartureTime('evening')"
          >
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5"/>
              <path d="M10 6V10L13 12" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            <span>Night</span>
          </button>
        </div>
      </div>
    </aside>

    <main class="results-main">
      <div class="quick-stats">
        <div class="stat-box">
          <span class="stat-label">CHEAPEST</span>
          <span class="stat-value">${{ stats.cheapest }}</span>
        </div>
        <div class="stat-box">
          <span class="stat-label">FASTEST</span>
          <span class="stat-value">{{ stats.fastest }}</span>
        </div>
        <div class="stat-box">
          <span class="stat-label">BEST VALUE</span>
          <span class="stat-value">{{ stats.bestValue }}/5</span>
        </div>
      </div>

      <div class="results-header">
        <div class="results-count">
          Showing {{ filteredFlights.length }}-{{ Math.min(currentPage * 10, totalResults) }} of {{ totalResults }} flight results
        </div>
        <div class="sort-options">
          <button class="sort-button active">Cheapest</button>
          <button class="sort-button">Fastest</button>
          <button class="sort-button">Best</button>
        </div>
      </div>

      <div class="flights-list">
        <div class="flight-card" *ngFor="let flight of filteredFlights">
          <div class="flight-header">
            <div class="airline-info">
              <div class="airline-logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                  <circle cx="16" cy="16" r="14" fill="#E7F1FF"/>
                  <path d="M24 16L16 8L8 16L16 24L24 16Z" fill="#0D6EFD"/>
                </svg>
              </div>
              <div class="airline-details">
                <div class="airline-name">{{ flight.airline }}</div>
                <div class="flight-number">{{ flight.flightNumber }}</div>
              </div>
            </div>
            <div class="flight-badges">
              <span class="badge markup" *ngIf="flight.hasMarkup">Markup Included</span>
              <span class="badge gds" *ngIf="flight.isGDS">GDS Content</span>
            </div>
          </div>

          <div class="flight-details">
            <div class="flight-time">
              <div class="time-point">
                <div class="time">{{ flight.departure.time }}</div>
                <div class="code">{{ flight.departure.code }}</div>
              </div>
              <div class="flight-path">
                <div class="duration-info">
                  <span class="duration">{{ flight.duration }}</span>
                  <span class="stops" *ngIf="flight.stops === 0">Non-stop</span>
                  <span class="stops" *ngIf="flight.stops > 0">{{ flight.stops }} stop</span>
                </div>
                <div class="path-line">
                  <div class="line"></div>
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="plane-icon">
                    <path d="M21 16V14L13 9V3.5C13 2.67 12.33 2 11.5 2C10.67 2 10 2.67 10 3.5V9L2 14V16L10 13.5V19L8 20.5V22L11.5 21L15 22V20.5L13 19V13.5L21 16Z" fill="#6B7280"/>
                  </svg>
                  <div class="line"></div>
                </div>
              </div>
              <div class="time-point">
                <div class="time">{{ flight.arrival.time }}</div>
                <div class="code">{{ flight.arrival.code }}</div>
              </div>
            </div>

            <div class="flight-amenities">
              <div class="amenity" [class.available]="flight.baggage">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <rect x="5" y="3" width="8" height="12" rx="1" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M7 3V2C7 1.44772 7.44772 1 8 1H10C10.5523 1 11 1.44772 11 2V3" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span>{{ flight.baggage }}</span>
              </div>
              <div class="amenity" [class.available]="flight.meal">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <path d="M3 2V8C3 9.10457 3.89543 10 5 10V16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  <path d="M15 2V6C15 7.10457 14.1046 8 13 8V16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span>{{ flight.meal ? 'Meal Included' : 'No meal' }}</span>
              </div>
              <div class="amenity" [class.available]="flight.wifi">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <path d="M2 7C5.31371 3.68629 11.6863 3.68629 15 7M5 10C6.65685 8.34315 9.34315 8.34315 11 10M8 13H8.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span>{{ flight.wifi ? 'Free Wi-Fi' : 'No Wi-Fi' }}</span>
              </div>
              <div class="seats-left" *ngIf="flight.seats <= 10">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <circle cx="9" cy="9" r="7" stroke="#F59E0B" stroke-width="1.5"/>
                  <path d="M9 5V9M9 13H9.01" stroke="#F59E0B" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span>{{ flight.seats }} seats left</span>
              </div>
            </div>
          </div>

          <div class="flight-price">
            <div class="price-info">
              <div class="price-label">incl. taxes & fees</div>
              <div class="price-amount">${{ flight.price.toLocaleString('en-US', {minimumFractionDigits: 2}) }}</div>
            </div>
            <div class="action-buttons">
              <button class="btn btn-primary" (click)="selectFlight(flight)">
                Select
              </button>
              <button class="btn btn-text" (click)="viewDetails(flight)">
                View Details
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M6 4L10 8L6 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="pagination">
        <div class="pagination-info">
          Showing page {{ currentPage }} of {{ Math.ceil(totalResults / 10) }}
        </div>
        <div class="pagination-controls">
          <button
            class="page-button"
            (click)="previousPage()"
            [disabled]="currentPage === 1"
          >
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </button>
          <button
            class="page-number"
            [class.active]="currentPage === 1"
            (click)="goToPage(1)"
          >
            1
          </button>
          <button
            class="page-number"
            [class.active]="currentPage === 2"
            (click)="goToPage(2)"
          >
            2
          </button>
          <button
            class="page-number"
            [class.active]="currentPage === 3"
            (click)="goToPage(3)"
          >
            3
          </button>
          <span class="page-ellipsis">...</span>
          <button
            class="page-number"
            (click)="goToPage(12)"
          >
            12
          </button>
          <button
            class="page-button"
            (click)="nextPage()"
          >
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M6 4L10 8L6 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>
    </main>
  </div>
</div>
