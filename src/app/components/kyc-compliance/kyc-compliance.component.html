<div class="kyc-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h3>Agency Verification</h3>
      <p class="agency-id">Non-IATA Corporate ID: #AM-99281</p>
    </div>

    <nav class="sidebar-nav">
      <a routerLink="/kyc-compliance" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <rect x="11" y="3" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <rect x="3" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <rect x="11" y="11" width="6" height="6" rx="1" stroke="currentColor" stroke-width="1.5"/>
        </svg>
        <span>Overview</span>
      </a>

      <a routerLink="/kyc-compliance/documents" class="nav-item" routerLinkActive="active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 2C5.44772 2 5 2.44772 5 3V17C5 17.5523 5.44772 18 6 18H14C14.5523 18 15 17.5523 15 17V6L11 2H6Z" stroke="currentColor" stroke-width="1.5"/>
          <path d="M11 2V6H15" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
        </svg>
        <span>Documents</span>
      </a>

      <a routerLink="/kyc-compliance/bank-details" class="nav-item" routerLinkActive="active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 2L2 6V8H18V6L10 2Z" fill="currentColor"/>
          <rect x="4" y="8" width="2" height="6" fill="currentColor"/>
          <rect x="9" y="8" width="2" height="6" fill="currentColor"/>
          <rect x="14" y="8" width="2" height="6" fill="currentColor"/>
          <rect x="2" y="14" width="16" height="2" fill="currentColor"/>
        </svg>
        <span>Bank Details</span>
      </a>

      <a routerLink="/kyc-compliance/tax-info" class="nav-item" routerLinkActive="active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="3" y="4" width="14" height="13" rx="1" stroke="currentColor" stroke-width="1.5"/>
          <path d="M7 3V5M13 3V5M3 8H17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <span>Tax Info</span>
      </a>

      <a routerLink="/security" class="nav-item" routerLinkActive="active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M10 2L4 5V9C4 13.42 7.03 17.34 10 18C12.97 17.34 16 13.42 16 9V5L10 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
          <path d="M10 6V10L13 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <span>Security</span>
      </a>
    </nav>

    <div class="sidebar-help">
      <div class="help-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="10" stroke="#0D6EFD" stroke-width="2"/>
          <path d="M12 8V12M12 16H12.01" stroke="#0D6EFD" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <h4>COMPLIANCE NOTE</h4>
      <p>All mandatory documents must be verified before flight issuance is enabled on your account.</p>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-text">
        <h1>KYC Compliance & Verification</h1>
        <p class="subtitle">Manage and track your legal documentation for platform access. High-tier access requires all mandatory documents to be 'Verified'.</p>
      </div>
      <button class="btn-download" (click)="downloadStatusReport()">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 2V10M9 10L12 7M9 10L6 7M3 12V14C3 14.5304 3.21071 15.0391 3.58579 15.4142C3.96086 15.7893 4.46957 16 5 16H13C13.5304 16 14.0391 15.7893 14.4142 15.4142C14.7893 15.0391 15 14.5304 15 14V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        Download Status Report
      </button>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon gray">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 6H21M8 12H21M8 18H21M3 6H3.01M3 12H3.01M3 18H3.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Total Documents</div>
          <div class="stat-value">{{ totalDocuments }}</div>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M8 12L11 15L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Verified</div>
          <div class="stat-value">{{ verifiedDocuments }}</div>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon yellow">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="stat-content">
          <div class="stat-label">Pending Action</div>
          <div class="stat-value">{{ pendingDocuments }}</div>
        </div>
      </div>
    </div>

    <!-- Documents Section -->
    <div class="documents-section">
      <div class="section-header">
        <h2>Required Documentation</h2>
        <span class="live-badge">
          <span class="pulse-dot"></span>
          Updates live
        </span>
      </div>

      <!-- Documents Table -->
      <div class="table-container">
        <table class="documents-table">
          <thead>
          <tr>
            <th class="th-document">DOCUMENT NAME</th>
            <th class="th-requirement">REQUIREMENT</th>
            <th class="th-status">STATUS</th>
            <th class="th-updated">LAST UPDATED</th>
            <th class="th-action">ACTION</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let doc of documents" [class.row-rejected]="doc.status === 'rejected'">
            <td class="td-document">
              <div class="doc-info">
                <div class="doc-icon" [ngClass]="{
                    'icon-blue': doc.status === 'verified',
                    'icon-yellow': doc.status === 'pending',
                    'icon-red': doc.status === 'rejected',
                    'icon-gray': doc.status === 'not-submitted'
                  }">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 2C5.44772 2 5 2.44772 5 3V17C5 17.5523 5.44772 18 6 18H14C14.5523 18 15 17.5523 15 17V6L11 2H6Z" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M11 2V6H15" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                  </svg>
                </div>
                <div class="doc-text">
                  <div class="doc-title">{{ doc.name }}</div>
                  <div class="doc-meta" *ngIf="doc.fileInfo">
                    Uploaded {{ doc.lastUpdated }} • {{ doc.fileInfo.type }} ({{ doc.fileInfo.size }})
                  </div>
                  <div class="doc-rejection" *ngIf="doc.status === 'rejected' && doc.rejectionReason">
                    {{ doc.rejectionReason }}
                  </div>
                </div>
              </div>
            </td>

            <td class="td-requirement">
                <span class="requirement-badge" [class.badge-mandatory]="doc.requirement === 'MANDATORY'">
                  {{ doc.requirement }}
                </span>
            </td>

            <td class="td-status">
              <div class="status-badge" [ngClass]="{
                  'status-verified': doc.status === 'verified',
                  'status-pending': doc.status === 'pending',
                  'status-rejected': doc.status === 'rejected',
                  'status-not-submitted': doc.status === 'not-submitted'
                }">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle *ngIf="doc.status === 'verified'" cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                  <path *ngIf="doc.status === 'verified'" d="M5 8L7 10L11 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>

                  <circle *ngIf="doc.status === 'pending'" cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                  <path *ngIf="doc.status === 'pending'" d="M8 4V8L11 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>

                  <circle *ngIf="doc.status === 'rejected'" cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                  <path *ngIf="doc.status === 'rejected'" d="M6 6L10 10M10 6L6 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>

                  <circle *ngIf="doc.status === 'not-submitted'" cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" stroke-dasharray="2 2"/>
                </svg>
                <span *ngIf="doc.status === 'verified'">Verified</span>
                <span *ngIf="doc.status === 'pending'">Pending Review</span>
                <span *ngIf="doc.status === 'rejected'">Rejected</span>
                <span *ngIf="doc.status === 'not-submitted'">Not Submitted</span>
              </div>
            </td>

            <td class="td-updated">{{ doc.lastUpdated }}</td>

            <td class="td-action">
              <button
                class="action-btn btn-primary"
                *ngIf="doc.status === 'verified'"
                (click)="downloadDocument(doc)"
              >
                Download
              </button>
              <button
                class="action-btn btn-secondary"
                *ngIf="doc.status === 'pending'"
                (click)="viewDetails(doc)"
              >
                View Details
              </button>
              <button
                class="action-btn btn-danger"
                *ngIf="doc.status === 'rejected'"
                (click)="reuploadDocument(doc)"
              >
                Re-upload
              </button>
              <button
                class="action-btn btn-secondary"
                *ngIf="doc.status === 'not-submitted'"
                (click)="uploadDocument(doc)"
              >
                Upload
              </button>
            </td>
          </tr>
          </tbody>
        </table>

        <div class="table-footer">
          <div class="table-footer-text">Showing 4 of 4 documents</div>
          <div class="table-footer-security">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 1L2 3V5.5C2 8.21 4.01 10.67 6 11C7.99 10.67 10 8.21 10 5.5V3L6 1Z" stroke="currentColor" stroke-width="1" stroke-linejoin="round"/>
            </svg>
            Secure 256-bit encryption
          </div>
        </div>
      </div>

      <!-- Info Boxes -->
      <div class="info-boxes">
        <div class="info-box guidelines-box">
          <div class="info-header">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="8" stroke="#0D6EFD" stroke-width="1.5"/>
              <path d="M10 6V10M10 14H10.01" stroke="#0D6EFD" stroke-width="1.5" stroke-linecap="round"/>
            </svg>
            <h3>Upload Guidelines</h3>
          </div>
          <ul class="guidelines-list">
            <li>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="#10B981" stroke-width="1.5"/>
                <path d="M5 8L7 10L11 6" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Files must be in PDF, JPG, or PNG format.</span>
            </li>
            <li>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="#10B981" stroke-width="1.5"/>
                <path d="M5 8L7 10L11 6" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Maximum file size per document is 10MB.</span>
            </li>
            <li>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="#10B981" stroke-width="1.5"/>
                <path d="M5 8L7 10L11 6" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span>Images must be clear and all text must be legible.</span>
            </li>
          </ul>
        </div>

        <div class="info-box help-box">
          <div class="help-content">
            <div class="help-icon-large">
              <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="24" cy="24" r="20" fill="#E7F1FF"/>
                <path d="M24 16V24M24 32H24.02" stroke="#0D6EFD" stroke-width="2.5" stroke-linecap="round"/>
              </svg>
            </div>
            <h3>Need assistance?</h3>
            <p>Our compliance team is ready to help you with document verification.</p>
            <button class="btn-chat" (click)="chatWithCompliance()">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2 2H14V10H5L2 13V2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
              </svg>
              Chat with Compliance
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="kyc-footer">
    <div class="footer-content">
      <p class="footer-copyright">© 2023 Amadeus IT Group SA. All rights reserved.</p>
      <div class="footer-links">
        <a routerLink="/privacy">Privacy Policy</a>
        <a routerLink="/terms">Terms of Service</a>
        <a routerLink="/compliance">Compliance Standards</a>
      </div>
    </div>
  </footer>
</div>
