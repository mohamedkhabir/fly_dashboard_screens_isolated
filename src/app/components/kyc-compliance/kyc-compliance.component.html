<div class="kyc-page">

  <main class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <div class="page-header-left">
        <h1>KYC Compliance & Verification</h1>
        <p class="subtitle">Manage and track your legal documentation for platform access. High-tier access requires all mandatory documents to be 'Verified'.</p>
      </div>
      <button class="btn-download" (click)="downloadStatusReport()">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <path d="M3 12V14C3 14.5304 3.21071 15.0391 3.58579 15.4142C3.96086 15.7893 4.46957 16 5 16H13C13.5304 16 14.0391 15.7893 14.4142 15.4142C14.7893 15.0391 15 14.5304 15 14V12M9 3V11M9 11L6 8M9 11L12 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Download Status Report
      </button>
    </div>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-info">
          <span class="stat-label">Total Documents</span>
          <span class="stat-value">{{ totalDocuments }}</span>
        </div>
        <div class="stat-icon gray">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M3 7H21M3 12H21M3 17H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-info">
          <span class="stat-label">Verified</span>
          <span class="stat-value green">{{ verifiedDocuments }}</span>
        </div>
        <div class="stat-icon green">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
            <path d="M8 12L11 15L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>

      <div class="stat-card pending">
        <div class="stat-info">
          <span class="stat-label">Pending Action</span>
          <span class="stat-value orange">{{ pendingDocuments }}</span>
        </div>
        <div class="stat-icon orange">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="2"/>
            <path d="M12 8V12L15 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Documents Section -->
    <div class="documents-section">
      <div class="section-header">
        <h2>Required Documentation</h2>
        <span class="live-badge">Updates live</span>
      </div>

      <!-- Documents Table -->
      <table class="documents-table">
        <thead>
        <tr>
          <th>DOCUMENT NAME</th>
          <th>REQUIREMENT</th>
          <th>STATUS</th>
          <th>LAST UPDATED</th>
          <th>ACTION</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let doc of documents" [class.row-rejected]="doc.status === 'rejected'">
          <td class="td-document">
            <div class="doc-info">
              <div class="doc-icon" [ngClass]="{
                    'icon-blue': doc.status === 'verified',
                    'icon-yellow': doc.status === 'pending',
                    'icon-red': doc.status === 'rejected',
                    'icon-gray': doc.status === 'not-submitted'
                  }">
                <!-- Building icon for Business License -->
                <svg *ngIf="doc.name === 'Business License'" width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <rect x="3" y="6" width="12" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6 9V13M9 9V13M12 9V13M3 6L9 2L15 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <!-- Card icon for Bank Details -->
                <svg *ngIf="doc.name === 'Bank Details'" width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <rect x="2" y="4" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M2 7H16" stroke="currentColor" stroke-width="1.5"/>
                  <rect x="4" y="10" width="4" height="2" rx="0.5" stroke="currentColor" stroke-width="1"/>
                </svg>
                <!-- ID icon for Identity Proof -->
                <svg *ngIf="doc.name === 'Identity Proof'" width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <rect x="2" y="4" width="14" height="10" rx="1" stroke="currentColor" stroke-width="1.5"/>
                  <circle cx="6.5" cy="8.5" r="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M10 7H14M10 10H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <!-- Document icon for Tax Certificate -->
                <svg *ngIf="doc.name === 'Tax Certificate'" width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <path d="M5 2H11L14 5V15C14 15.5523 13.5523 16 13 16H5C4.44772 16 4 15.5523 4 15V3C4 2.44772 4.44772 2 5 2Z" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M11 2V5H14" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M7 9H11M7 12H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
              </div>
              <div class="doc-text">
                <span class="doc-name">{{ doc.name }}</span>
                <span class="doc-error" *ngIf="doc.status === 'rejected' && doc.rejectionReason">{{ doc.rejectionReason }}</span>
              </div>
            </div>
          </td>
          <td>
                <span class="requirement-badge" [class.mandatory]="doc.requirement === 'MANDATORY'">
                  {{ doc.requirement }}
                </span>
          </td>
          <td>
                <span class="status-badge" [ngClass]="{
                  'status-verified': doc.status === 'verified',
                  'status-pending': doc.status === 'pending',
                  'status-rejected': doc.status === 'rejected',
                  'status-not-submitted': doc.status === 'not-submitted'
                }">
                  <svg *ngIf="doc.status === 'verified'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M4.5 7L6.5 9L9.5 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <svg *ngIf="doc.status === 'pending'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M7 4V7L9 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                  <svg *ngIf="doc.status === 'rejected'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M5 5L9 9M9 5L5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                  <svg *ngIf="doc.status === 'not-submitted'" width="14" height="14" viewBox="0 0 14 14" fill="none">
                    <circle cx="7" cy="7" r="6" stroke="currentColor" stroke-width="1.5" stroke-dasharray="2 2"/>
                  </svg>
                  <span *ngIf="doc.status === 'verified'">Verified</span>
                  <span *ngIf="doc.status === 'pending'">Pending Review</span>
                  <span *ngIf="doc.status === 'rejected'">Rejected</span>
                  <span *ngIf="doc.status === 'not-submitted'">Not Submitted</span>
                </span>
          </td>
          <td class="td-date">{{ doc.lastUpdated }}</td>
          <td class="td-action">
            <button class="action-btn link" *ngIf="doc.status === 'verified'" (click)="downloadDocument(doc)">Download</button>
            <button class="action-btn link" *ngIf="doc.status === 'pending'" (click)="viewDetails(doc)">View Details</button>
            <button class="action-btn primary" *ngIf="doc.status === 'rejected'" (click)="reuploadDocument(doc)">Re-upload</button>
            <button class="action-btn outline" *ngIf="doc.status === 'not-submitted'" (click)="uploadDocument(doc)">Upload</button>
          </td>
        </tr>
        </tbody>
      </table>

      <div class="table-footer">
        <span class="footer-count">Showing 4 of 4 documents</span>
        <span class="footer-security">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M6 1L2 3V5.5C2 8.21 4.01 10.67 6 11C7.99 10.67 10 8.21 10 5.5V3L6 1Z" stroke="currentColor" stroke-width="1"/>
            </svg>
            Secure 256-bit encryption
          </span>
      </div>
    </div>

    <!-- Info Boxes -->
    <div class="info-boxes">
      <div class="info-box guidelines">
        <div class="info-header">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="10" cy="10" r="8" stroke="#0D6EFD" stroke-width="1.5"/>
            <path d="M10 6V10M10 14H10.01" stroke="#0D6EFD" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <h3>Upload Guidelines</h3>
        </div>
        <ul class="guidelines-list">
          <li>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <circle cx="8" cy="8" r="6" stroke="#10B981" stroke-width="1.5"/>
              <path d="M5.5 8L7.5 10L10.5 6.5" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Files must be in PDF, JPG, or PNG format.
          </li>
          <li>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <circle cx="8" cy="8" r="6" stroke="#10B981" stroke-width="1.5"/>
              <path d="M5.5 8L7.5 10L10.5 6.5" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Maximum file size per document is 10MB.
          </li>
          <li>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <circle cx="8" cy="8" r="6" stroke="#10B981" stroke-width="1.5"/>
              <path d="M5.5 8L7.5 10L10.5 6.5" stroke="#10B981" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Images must be clear and all text must be legible.
          </li>
        </ul>
      </div>

      <div class="info-box help">
        <div class="help-content">
          <div class="help-icon">
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="16" fill="#E0F2FE"/>
              <path d="M20 12C17 12 15 14 15 16.5C15 17.5 16 18 16 18M20 24V24.01M20 21C20 19 22 18 22 16.5C22 14.5 20.5 13 20 13" stroke="#0D6EFD" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <h3>Need assistance?</h3>
          <p>Our compliance team is ready to help you with document verification.</p>
          <button class="btn-chat" (click)="chatWithCompliance()">Chat with Compliance</button>
        </div>
      </div>
    </div>
  </main>


</div>
