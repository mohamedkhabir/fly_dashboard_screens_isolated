<div class="flight-details-page">
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
          <path d="M4 20L14 4L24 20H4Z" fill="#0D6EFD"/>
        </svg>
        <span>B2B FlyEngine</span>
      </div>
      <nav class="nav-links">
        <a href="#">Dashboard</a>
        <a href="#" class="active">Bookings</a>
        <a href="#">Reports</a>
        <a href="#">Settings</a>
      </nav>
    </div>
    <div class="header-right">
      <button class="icon-btn">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M15 6.5C15 4.01472 12.7614 2 10 2C7.23858 2 5 4.01472 5 6.5C5 10.0833 3 11.5 3 11.5H17C17 11.5 15 10.0833 15 6.5Z" stroke="#6B7280" stroke-width="1.5"/>
          <path d="M11.5 14.5C11.5 15.3284 10.8284 16 10 16C9.17157 16 8.5 15.3284 8.5 14.5" stroke="#6B7280" stroke-width="1.5"/>
        </svg>
      </button>
      <div class="avatar">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <circle cx="10" cy="7" r="4" stroke="#EF8B6E" stroke-width="1.5"/>
          <path d="M3 18C3 14.134 6.13401 11 10 11C13.866 11 17 14.134 17 18" stroke="#EF8B6E" stroke-width="1.5"/>
        </svg>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb">
        <a href="#">Search Results</a>
        <span class="separator">/</span>
        <a href="#">Flight Selection</a>
        <span class="separator">/</span>
        <span class="current">Flight Details & Rules</span>
      </nav>

      <!-- Page Header -->
      <div class="page-header">
        <div class="page-header-left">
          <h1>Flight Details & Fare Rules</h1>
          <p class="subtitle">Review your itinerary and Amadeus fare conditions before proceeding.</p>
        </div>
        <div class="page-header-right">
          <button class="btn btn-outline" (click)="downloadPDF()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M3 12V14C3 14.5523 3.44772 15 4 15H14C14.5523 15 15 14.5523 15 14V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              <path d="M9 3V10M9 10L6 7M9 10L12 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Download PDF
          </button>
          <button class="btn btn-outline" (click)="shareDetails()">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <circle cx="14" cy="4" r="2.5" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="14" cy="14" r="2.5" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="4" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/>
              <path d="M6.5 7.5L11.5 5M6.5 10.5L11.5 13" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            Share
          </button>
        </div>
      </div>

      <!-- Content Grid -->
      <div class="content-grid">
        <!-- Left Column -->
        <div class="left-column">
          <!-- Tabs -->
          <div class="tabs-card">
            <div class="tabs-header">
              <button
                class="tab-btn"
                [class.active]="activeTab === 'itinerary'"
                (click)="setTab('itinerary')">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <path d="M14 6L9 2L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M4 12L9 16L14 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Itinerary Details
              </button>
              <button
                class="tab-btn"
                [class.active]="activeTab === 'fare-rules'"
                (click)="setTab('fare-rules')">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <path d="M4 2H12L15 5V15C15 15.5523 14.5523 16 14 16H4C3.44772 16 3 15.5523 3 15V3C3 2.44772 3.44772 2 4 2Z" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M12 2V5H15" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M6 9H12M6 12H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                Fare Rules & Penalties
              </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content" *ngIf="activeTab === 'itinerary'">
              <!-- Flight Route Header -->
              <div class="flight-route-header">
                <div class="route-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M18 8L12 2L6 8" stroke="#0D6EFD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M6 16L12 22L18 16" stroke="#0D6EFD" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
                <h2>Outbound: {{ flightInfo.route.from }} ({{ flightInfo.route.fromCode }}) to {{ flightInfo.route.to }} ({{ flightInfo.route.toCode }})</h2>
              </div>

              <!-- Flight Timeline -->
              <div class="flight-timeline">
                <div class="timeline-row">
                  <div class="timeline-left">
                    <div class="timeline-marker"></div>
                    <div class="timeline-time">{{ flightInfo.departure.time }}</div>
                    <div class="timeline-location">{{ flightInfo.departure.airport }} - T5</div>
                  </div>
                  <div class="timeline-right">
                    <div class="timeline-time">{{ flightInfo.arrival.time }}</div>
                    <div class="timeline-location">JFK Intl (JFK) - T7</div>
                  </div>
                </div>

                <div class="flight-info-row">
                  <div class="airline-info">
                    <span class="airline-name">{{ flightInfo.airline }} â€¢ {{ flightInfo.flightNumber }}</span>
                    <span class="aircraft-badge">{{ flightInfo.aircraft }}</span>
                  </div>
                </div>

                <div class="duration-row">
                  <div class="duration-item">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <circle cx="8" cy="8" r="6.5" stroke="#6B7280" stroke-width="1.5"/>
                      <path d="M8 4.5V8L10.5 9.5" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                    <span>{{ flightInfo.duration }} duration</span>
                  </div>
                  <div class="duration-item">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <rect x="4" y="6" width="8" height="6" rx="1" stroke="#6B7280" stroke-width="1.5"/>
                      <path d="M6 6V4C6 2.89543 6.89543 2 8 2C9.10457 2 10 2.89543 10 4V6" stroke="#6B7280" stroke-width="1.5"/>
                    </svg>
                    <span>{{ amenities.pitch }}</span>
                  </div>
                </div>
              </div>

              <!-- Travel Time Info -->
              <div class="travel-time-banner">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                  <circle cx="9" cy="9" r="7" stroke="#0D6EFD" stroke-width="1.5"/>
                  <path d="M9 5V9L11.5 10.5" stroke="#0D6EFD" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span>Total travel time: 7h 55m. Non-stop flight.</span>
              </div>

              <!-- Baggage & Fare Rules Section -->
              <div class="baggage-section">
                <h3>Baggage & Fare Rules</h3>

                <div class="baggage-grid">
                  <!-- Baggage Allowance -->
                  <div class="baggage-card">
                    <div class="baggage-card-header">BAGGAGE ALLOWANCE</div>
                    <div class="baggage-card-body">
                      <div class="baggage-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <rect x="6" y="4" width="8" height="12" rx="1" stroke="#6B7280" stroke-width="1.5"/>
                          <path d="M8 4V2M12 4V2" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round"/>
                          <path d="M6 8H14" stroke="#6B7280" stroke-width="1.5"/>
                        </svg>
                        <span class="baggage-label">Checked-in baggage</span>
                        <span class="baggage-value">{{ baggage.checkedIn }}</span>
                      </div>
                      <div class="baggage-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <rect x="5" y="6" width="10" height="8" rx="1" stroke="#6B7280" stroke-width="1.5"/>
                          <path d="M8 6V4C8 3.44772 8.44772 3 9 3H11C11.5523 3 12 3.44772 12 4V6" stroke="#6B7280" stroke-width="1.5"/>
                        </svg>
                        <span class="baggage-label">Cabin baggage</span>
                        <span class="baggage-value">{{ baggage.cabin }}</span>
                      </div>
                    </div>
                  </div>

                  <!-- Change & Cancellation -->
                  <div class="baggage-card">
                    <div class="baggage-card-header">CHANGE & CANCELLATION</div>
                    <div class="baggage-card-body">
                      <div class="baggage-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <path d="M4 13V15C4 15.5523 4.44772 16 5 16H15C15.5523 16 16 15.5523 16 15V13" stroke="#6B7280" stroke-width="1.5"/>
                          <path d="M7 10L10 7L13 10M10 7V15" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="baggage-label">Change Fee</span>
                        <span class="baggage-value">USD 150.00</span>
                      </div>
                      <div class="baggage-item">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <circle cx="10" cy="10" r="6" stroke="#6B7280" stroke-width="1.5"/>
                          <path d="M7 7L13 13M13 7L7 13" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <span class="baggage-label">Cancellation Fee</span>
                        <span class="baggage-value red">Non-refundable</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Amadeus Fare Basis -->
              <div class="fare-basis-card">
                <div class="fare-basis-header">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <rect x="3" y="4" width="14" height="12" rx="1" stroke="#6B7280" stroke-width="1.5"/>
                    <path d="M7 8H13M7 11H11" stroke="#6B7280" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                  <span>AMADEUS FARE BASIS: {{ flightInfo.fareBasis }}</span>
                </div>
                <ul class="fare-rules-list">
                  <li>CANCELLATIONS: TICKET IS NON-REFUNDABLE IN CASE OF CANCEL/NO-SHOW.</li>
                  <li>CHANGES: ANY TIME CHANGES PERMITTED FOR A FEE OF USD 150.00 FOR REISSUE/REVALIDATION.</li>
                  <li>MINIMUM STAY: NO MINIMUM STAY REQUIREMENTS.</li>
                  <li>NAME CHANGES ARE NOT PERMITTED. TICKETS ARE NON-TRANSFERABLE.</li>
                </ul>
              </div>
            </div>

            <!-- Fare Rules Tab Content -->
            <div class="tab-content" *ngIf="activeTab === 'fare-rules'">
              <div class="fare-rules-content">
                <h2>Fare Rules & Penalties</h2>
                <p class="fare-rules-subtitle">Detailed fare conditions from Amadeus GDS</p>

                <div class="fare-rule-section">
                  <h4>CANCELLATIONS</h4>
                  <ul>
                    <li *ngFor="let rule of fareRules.cancellations">{{ rule }}</li>
                  </ul>
                </div>

                <div class="fare-rule-section">
                  <h4>CHANGES / REISSUE / REVALIDATION</h4>
                  <ul>
                    <li *ngFor="let rule of fareRules.changes">{{ rule }}</li>
                  </ul>
                </div>

                <div class="fare-rule-section">
                  <h4>REFUNDS</h4>
                  <ul>
                    <li *ngFor="let rule of fareRules.refunds">{{ rule }}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column -->
        <div class="right-column">
          <!-- Price Summary Card -->
          <div class="price-card">
            <h3>Price Summary</h3>

            <div class="price-rows">
              <div class="price-row">
                <span>Base Fare (1x Adult)</span>
                <span>USD {{ pricing.baseFare.toFixed(2) }}</span>
              </div>
              <div class="price-row">
                <span>Taxes & Surcharges</span>
                <span>USD {{ pricing.taxes.toFixed(2) }}</span>
              </div>
              <div class="price-row markup">
                <span>Agency Markup</span>
                <span class="green">USD {{ pricing.agencyMarkup.toFixed(2) }}</span>
              </div>
            </div>

            <div class="price-total">
              <span class="total-label">TOTAL AMOUNT</span>
              <span class="total-value">USD {{ pricing.totalAmount.toFixed(2) }}</span>
            </div>

            <button class="btn btn-primary btn-block" (click)="continueToPassengerInfo()">
              Continue to Passenger Info
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                <path d="M7 4L12 9L7 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>

            <p class="terms-note">BY CONTINUING, YOU AGREE TO THE FARE CONDITIONS AND AGENCY TERMS OF SERVICE.</p>

            <!-- Instant Confirmation -->
            <div class="instant-confirm">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle cx="10" cy="10" r="8" fill="#10B981"/>
                <path d="M6.5 10L9 12.5L13.5 7.5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <div class="instant-confirm-text">
                <span class="title">Instant Confirmation</span>
                <span class="desc">GDS inventory is held for 30 minutes until payment.</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-left">
      <svg width="8" height="8" viewBox="0 0 8 8" fill="none">
        <circle cx="4" cy="4" r="4" fill="#10B981"/>
      </svg>
      <span>SECURE AMADEUS SSL CONNECTION</span>
    </div>
    <div class="footer-right">
      <a href="#">Fare Glossary</a>
      <a href="#">Ticketing Policy</a>
      <a href="#">Support Desk</a>
    </div>
  </footer>
</div>
